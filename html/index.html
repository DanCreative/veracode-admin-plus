<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Veracode Admin Plus</title>
    <link rel="stylesheet" href="/assets/chosen.min.css">
    <link rel="stylesheet" href="/assets/index.css">

    <script src="https://unpkg.com/htmx.org@1.9.3"></script>
    <script src="https://unpkg.com/hyperscript.org@0.9.9"></script>
    <script src="/assets/jquery-3.7.0.min.js"></script>
    <script src="/assets/chosen.jquery.min.js"></script>
</head>

<body>
    <div class="container">
        <table>
            <thead id="thead" hx-get="/users" hx-swap="innerHTML" hx-target="#body" hx-trigger="load" hx-indicator="#load-body">
                <tr>
                    <th class="details">Email</th>
                    <th class="details">User Type</th>
                    <th class="details">Team(s)</th>
                    {{ range .Roles }}
                        {{ if not .IsScanType}}
                            <th class="rotate"><div><span>{{ .RoleDescription }}</span></div></th>
                        {{ end }}
                    {{ end }}
                    <th class="rotate"><div><span>Scan Type</span></div></th>
                </tr>
            </thead>
            <tbody id="body" hx-get="/users/meta" hx-trigger="change" hx-target=".row" hx-swap="innerHTML"></tbody>
        </table>
        <div class="row">
            {{ block "tableMeta" .Page }}
            <div class="grid-paging-rows-x-to-y-of-z">{{ .Number }} - {{ .Size }} of {{ .TotalElements }}</div>
            <span class="grid-paging-summary-panel">
                <button type="button" class="grid-paging-button" id="users-1-goto-first-page"> ◀◀ </button>
                <button script="on click get the (value of #users-1-page-number) as an Int decrement it set the (value of #users-1-page-number) to it then send change to #users-1-page-number" type="button" class="grid-paging-button" id="users-1-goto-previous-page"> ◀ </button>

                <input name="page" class="grid-paging-textbox grid-input ng-untouched ng-pristine ng-valid" value="1" id="users-1-page-number" hx-get="/users" hx-trigger="change" hx-target="#body" hx-swap="innerHTML" hx-indicator="#load-body" hx-include="#users-1-row-select">
                <span class="grid-paging-pageOfY">of {{ .TotalPages }}</span>

                <button script="on click get the (value of #users-1-page-number) as an Int increment it set the (value of #users-1-page-number) to it then send change to #users-1-page-number" type="button" class="grid-paging-button" id="users-1-goto-next-page"> ▶ </button>
                <button type="button" class="grid-paging-button" id="users-1-goto-last-page"> ▶▶ </button>
            </span>
            <span>
                <label for="users-1-row-select">Rows</label>

                <select name="size" class="grid-paging-row-select" id="users-1-row-select" hx-get="/users" hx-trigger="change" hx-target="#body" hx-swap="outerHTML" hx-indicator="#load-body" hx-include="#users-1-page-number">
                    <option value="10" id="users-1-row-select-10"> 10 </option>
                    <option value="25" id="users-1-row-select-25"> 25 </option>
                    <option value="50" id="users-1-row-select-50"> 50 </option>
                    <option value="100" id="users-1-row-select-100"> 100 </option>
                    <option value="250" id="users-1-row-select-250"> 250 </option>
                </select>
            </span>
            {{ end }}
        </div>
        <div id="load-body" class="htmx-indicator loader"></div>
    </div>
    <script>
        htmx.on("htmx:afterOnLoad", function(evt) {
            $(".teams-select").chosen({width: "200px", no_results_text: "No teams found...",placeholder_text_multiple:"Select teams...", display_selected_options: false});
        });
    </script>
</body>

</html>